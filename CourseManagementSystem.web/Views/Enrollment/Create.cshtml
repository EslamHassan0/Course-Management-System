@using CourseManagementSystem.Application.DTO
@model EnrollmentDto

<h2>Enroll a Student</h2>

@if (ViewData["Error"] != null)
{
    <script>toastr.error("@ViewData["Error"]");</script>
}
@if (TempData["Success"] != null)
{
    <script>toastr.success("@TempData["Success"]");</script>
}

<form method="post">
    <div class="form-group">
        <label>Student</label>
        @if ((ViewBag.Students?.Count ?? 0) > 0)
        {
            <select asp-for="StudentId" asp-items="ViewBag.Students" class="form-control">
                <option value="">-- Select a Student --</option>
            </select>
        }
        else
        {
            <p style="color: red;">⚠ No students available.</p>
        }
    </div>

    <div class="form-group">
        <label>Course</label>
        
        @if ((ViewBag.Courses?.Count ?? 0) > 0)
        {
            <select asp-for="CourseId" asp-items="ViewBag.Courses" class="form-control">
                <option value="">-- Select a Course --</option>
            </select>
        }
        else
        {
            <p style="color: red;">⚠ No courses available.</p>
        }
    </div>

    <p>Available Slots: <span id="availableSlots"></span></p>

    <button type="submit" class="btn btn-success">Enroll</button>
    <a href="@Url.Action("Index")" class="btn btn-secondary">Cancel</a>
</form>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
}
